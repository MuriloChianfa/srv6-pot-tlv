frr version 10.3
frr defaults traditional
hostname frr6
log syslog informational
service integrated-vtysh-config
!
! ———————————————————
! Downstreams VRFs
! ———————————————————
!
vrf Client1
 exit-vrf
!
vrf Client2
 exit-vrf
!
! ————————————————————————
! Downstreams Route Maps
! ————————————————————————
!
ip prefix-list CLIENT1_ROUTE_LIST seq 5 permit 192.168.11.0/24
ip prefix-list CLIENT1_ROUTE_LIST seq 10 permit 192.168.12.0/24
!
route-map CLIENT1_ROUTE_LEAK permit 10
 match ip address prefix-list CLIENT1_ROUTE_LIST
exit
!
! ———————————————————
! Inter ISP IFs
! ———————————————————
!
interface eth1
 ipv6 address 2001:db8:26::6/64
 ipv6 router isis SRv6
 isis circuit-type level-1
 isis network point-to-point
exit
!
interface eth2
 ipv6 address 2001:db8:56::6/64
 ipv6 router isis SRv6
 isis circuit-type level-1
 isis network point-to-point
exit
!
! ———————————————————
! Downstreams IFs
! ———————————————————
!
interface eth4
 ip address 172.16.12.6/24
 ip ospf area 0
 ipv6 address 2001:cafe:12::6/64
 ipv6 ospf6 area 0
exit
!
interface eth5
 ip address 172.16.22.6/24
 ip ospf area 0
 ipv6 address 2001:cafe:22::6/64
 ipv6 ospf6 area 0
exit
!
! ———————————————————
! Loopback IFs
! ———————————————————
!
interface lo
 ipv6 address 2001:db8:66::6/64
 ipv6 router isis SRv6
 isis circuit-type level-1
exit
!
interface lo1
 ipv6 address 2001:dead:60::1/64
 ipv6 router isis SRv6
 isis circuit-type level-1
exit
!
! ———————————————————
! Global BGP Table
! ———————————————————
!
router bgp 65000
 bgp router-id 6.6.6.6
 bgp log-neighbor-changes
 bgp default ipv4-unicast
 bgp default ipv4-vpn
 bgp default ipv6-unicast
 bgp default ipv6-vpn
 bgp graceful-restart
 neighbor 2001:db8:33::3 remote-as 65000
 neighbor 2001:db8:33::3 description FRR3
 neighbor 2001:db8:33::3 update-source lo
 neighbor 2001:db8:33::3 capability extended-nexthop
 !
 segment-routing srv6
  locator FRR6
 exit
 !
 address-family ipv4 unicast
  redistribute isis SRv6
  neighbor 2001:db8:33::3 activate
  neighbor 2001:db8:33::3 next-hop-self
 exit-address-family
 !
 address-family ipv4 vpn
  neighbor 2001:db8:33::3 activate
  neighbor 2001:db8:33::3 next-hop-self
 exit-address-family
 !
 address-family ipv6 unicast
  redistribute isis SRv6
  neighbor 2001:db8:33::3 activate
  neighbor 2001:db8:33::3 next-hop-self
 exit-address-family
 !
 address-family ipv6 vpn
  neighbor 2001:db8:33::3 activate
  neighbor 2001:db8:33::3 next-hop-self
 exit-address-family
exit
!
! ——————————————————————
! Virtual Routing BGPs 
! ——————————————————————
!
router bgp 65000 vrf Client1
 bgp log-neighbor-changes
 bgp default ipv4-unicast
 bgp default ipv6-unicast
 sid vpn per-vrf export 10
 !
 address-family ipv4 unicast
  network 172.16.12.0/24
  network 192.168.12.0/24
  nexthop vpn export 2001:dead:60::1
  rd vpn export 65000:6
  rt vpn import 65000:101
  rt vpn export 65000:101
  export vpn
  import vpn
 exit-address-family
 !
 address-family ipv6 unicast
  nexthop vpn export 2001:dead:60::1
  rd vpn export 65000:6
  rt vpn import 65000:101
  rt vpn export 65000:101
  export vpn
  import vpn
 exit-address-family
exit
!
router bgp 65000 vrf Client2
 bgp log-neighbor-changes
 bgp default ipv4-unicast
 bgp default ipv6-unicast
 bgp graceful-restart
 sid vpn per-vrf export 20
 !
 address-family ipv4 unicast
  network 172.16.22.0/24
  network 192.168.22.0/24
  nexthop vpn export 2001:dead:60::1
  rd vpn export 65000:6
  rt vpn import 65000:102
  rt vpn export 65000:102
  export vpn
  import vpn
 exit-address-family
 !
 address-family ipv6 unicast
  nexthop vpn export 2001:dead:60::1
  rd vpn export 65000:6
  rt vpn import 65000:102
  rt vpn export 65000:102
  export vpn
  import vpn
 exit-address-family
exit
!
! ——————————————————————
! Virtual OSPFs
! ——————————————————————
!
router ospf vrf Client1
 ospf router-id 6.6.6.6
 redistribute connected
 redistribute bgp      
 default-information originate always
exit
!
router ospf vrf Client2
 ospf router-id 6.6.6.6
 redistribute connected
 redistribute bgp      
 default-information originate always
exit
!
router ospf6 vrf Client1
 ospf6 router-id 6.6.6.6
 redistribute connected
 redistribute bgp      
 default-information originate always
exit
!
router ospf6 vrf Client2
 ospf6 router-id 6.6.6.6
 redistribute connected
 redistribute bgp      
 default-information originate always
exit
!
! ——————————————————————
! ISP IS-IS
! ——————————————————————
!
router isis SRv6
 is-type level-1
 net 49.0001.0001.0006.00
 lsp-mtu 1300
 segment-routing on
 segment-routing node-msd 8
exit
!
! ——————————————————————
! ISP SRv6 SDN
! ——————————————————————
!
segment-routing
 srv6
  encapsulation
   source-address 2001:dead:60::1
  locators
   locator FRR6
    prefix 2001:dead:60::/64 block-len 40 node-len 24 func-bits 16
   exit
   !
  exit
  !
  formats
   format usid-f3216
   exit
   !
   format uncompressed-f4024
   exit
   !
  exit
  !
 exit
 !
exit
!
